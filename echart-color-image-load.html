<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script type="text/javascript" src="echarts.min.js"></script>
</head>
<body>
<!-- <img src="58ee21003601b.png" alt="" width="500px" height="400px" id="imgid"> -->
图片加载不出的问题 错误
echarts.min.js:14 Uncaught TypeError: Failed to execute 'createPattern' on 'CanvasRenderingContext2D': The provided value is not of type '(CSSImageValue or HTMLImageElement or SVGImageElement or HTMLVideoElement or HTMLCanvasElement or ImageBitmap or OffscreenCanvas)'
<div id="chartmain" style="width:600px; height: 400px;"></div>
	<script type="text/javascript">
	//window.onload = function (argument) {
		// body...
	
        //指定图标的配置和数据
          var allData = 1000;
   // var bigImg = document.createElement("img");     //创建一个img元素  
   //       bigImg.src="",
   //   bigImg.setAttribute("id", "imgid");
   //   var myDiv = document.getElementsByTagName('body'); //获得dom对象  
   //   console.log(myDiv)
   //  // console.log(window.parent.document.getElementsByClassName('navbar-brand'))
   //      myDiv[0].appendChild(bigImg);      //为dom添加子元素img  
 //   //      console.log(document.getElementById('imgid'))
 //   var img1 = new Image(); // HTML5 Constructor
	// img1.src = '58ee21003601b.png';
	// img1.alt = 'alt';
	// document.body.appendChild(img1);

	var img2 = document.createElement('img'); // use DOM HTMLImageElement
	img2.src = '58ee21003601b.png';
	img2.alt = 'alt text';
//	document.body.appendChild(img2);

	// using first image in the document
	alert(document.images[0]);
  img2.onload = function() {
  	// body...
  
     			var vm = {
                        selectColor: '#c5b50d',
                        bgColor: ['#1766e5', '#4585ea','#74a3ef','#a2c2f5','#d1e0fa'],
                        maxRadius: 88,
                        centerY: 115
                    };
                var metaData =[{"type":"A","title":"近7天活跃的设备","allData":5000,"filterData":5000,"selected":false,"downLoadType":"all","radiusData":300},{"type":"B","title":"近3月活跃的设备","allData":8000,"filterData":3000,"selected":false,"downLoadType":"all","radiusData":450},{"type":"C","title":"非换机设备","allData":9000,"filterData":1000,"selected":false,"downLoadType":"all","radiusData":600},{"type":"D","title":"可识别设备","allData":9500,"filterData":500,"selected":false,"downLoadType":"all","radiusData":750},{"type":"E","title":"全部设备","allData":10000,"filterData":500,"selected":false,"downLoadType":"all","radiusData":900}];
                // 引线的
                var seriesDefault = {
                        z:10,
                        name: '',
                        type: 'pie',
                        radius : [0, 0],
                        startAngle:300,
                        center: [0, 250],
                        silent:true,
                        stillShowZeroSum: false,
                        avoidLabelOverlap: false,
                        data:[
                            {
                                value:0,
                                name:'',
                                label:{
                                    normal: {
                                        show: true
                                    }
                                },
                                labelLine:{
                                    normal:{
                                        show:true,
                                        lineStyle:{
                                            color: '#6d6d6d'
                                        }
                                    }
                                }
                            }
                        ],
                        labelLine:{
                            normal:{
                                length:0,
                                length2:30
                            }
                        },
                        label : {
                            normal : {
                                position : "outside",
                                textStyle : {
                                    fontSize : 12,
                                    color : "#6d6d6d"
                                }
                            }
                        },
                        itemStyle: {
                            normal:{
                                color : "#666666",
                                borderColor: '#666666',
                                shadowBlur: 1,
                                shadowOffsetX: 0,
                                shadowColor: 'rgba(0, 0, 0, 0.5)'
                            },
                            emphasis: {
                                shadowBlur: 10,
                                shadowOffsetX: 0,
                                shadowColor: 'rgba(0, 0, 0, 0.5)'
                            }
                        }
                    };
                // 框内数据
                var outerNumberDefault = {
                    z:10,
                    name: '',
                    type: 'pie',
                    radius : [0, 0],
                    startAngle:180,
                    center: [0, 250],
                    stillShowZeroSum: false,
                    avoidLabelOverlap: true,
                    data:[
                        {
                            value:0,
                            name:'',
                            label:{
                                normal: {
                                    show: true
                                }
                            }
                        }
                    ],
                    labelLine:{
                        normal:{
                            show: false
                        }
                    },
                    label : {
                        normal : {
                            show: true,
                            position : "inner",
                            padding: [0, 0, 0, 60],
                            textStyle : {
                                fontSize : 12,
                                color : "#ffffff"
                            },
                            formatter: " {a} "
                        }
                    },
                    itemStyle: {
                        normal:{
                            color: {
                                       image:img2,
                                       repeat: 'repeat'    
                                
                            },
                            borderColor: '#666666',
                            shadowBlur: 1,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        },
                        emphasis: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                };
                // 框外边框
                var outerBorderDefault = {
                        z:10,
                        name: '',
                        type: 'pie',
                        radius : [0, 0],
                        startAngle:300,
                        center: [0, 250],
                        stillShowZeroSum: false,
                        avoidLabelOverlap: true,
                        silent:true,
                        data:[
                            {
                                value:0,
                                name:'',
                                label:{
                                    normal: {
                                        show: false
                                    }
                                },
                                labelLine:{
                                    normal:{
                                        show:false,
                                        lineStyle:{
                                            color: '#2b4659'
                                        }
                                    }
                                }
                            }
                        ],
                        labelLine:{
                            normal:{
                                show:false,
                                length:0,
                                length2:30
                            },
                            emphasis:{
                                show:false
                            }
                        },
                        label : {
                            normal : {
                                position : "outside",
                                textStyle : {
                                    fontSize : 24,
                                    color : "#B03A5B"
                                }
                            },
                            emphasis:{
                                show:false
                            }
                        },
                        itemStyle: {
                            normal:{
                                color : "#666666",
                                borderColor: '#666666',
                                shadowBlur: 1,
                                shadowOffsetX: 0,
                                shadowColor: 'rgba(0, 0, 0, 0.5)'
                            },
                            emphasis: {
                                shadowBlur: 10,
                                shadowOffsetX: 0,
                                opacity: 0,
                                shadowColor: 'rgba(0, 0, 0, 0.5)'
                            }
                        }
                    };
                vm.chartOpts = {
                    title : {
                        show:false,
                        text: '各种金额占比',
                        subtext: '单位： 万元',
                        x:'center'
                    },
                    tooltip : {
                        trigger: 'item',
                        formatter: "{a} <br/>{b} : {c} "
                       // formatter: "{a} <br/>{b} : {c} ({d}%)"
                    },
                    legend: {
                        show: false,
                        orient: 'vertical',
                        left: 'left',
                        data: ['近7天活跃的设备','近3月活跃的设备','非换机设备','可识别设备','全部设备']
                    },
                    toolbox: {
                        show: false,
                        orient: 'vertical',
                        left: 'right',
                        top: 'center',
                        feature: {
                            dataView: {readOnly: false},
                            restore: {},
                            saveAsImage: {}
                        }
                    },
                    series : [
                    ]
                };
                
                for(var i = 0; i < metaData.length; i++){
                   setss(i);
                }
                function extendDeep(parent, child) {
                    child = child || {};
                    for(var i in parent) {
                        if(parent.hasOwnProperty(i)) {
                            //检测当前属性是否为对象
                            if(typeof parent[i] === "object") {
                                //如果当前属性为对象，还要检测它是否为数组
                                //这是因为数组的字面量表示和对象的字面量表示不同
                                //前者是[],而后者是{}
                                child[i] = (Object.prototype.toString.call(parent[i]) === "[object Array]") ? [] : {};
                                //递归调用extend
                                extendDeep(parent[i], child[i]);
                            } else {
                                child[i] = parent[i];
                            }
                        }
                    }
                    return child;
                }
                function setss(indexs) {
                    var _oneSeriesData,_outerNumberSeries,_outerBorderSeries;
                     _outerNumberSeries = setSeries(outerNumberDefault,indexs,'outerNumber');
                     vm.chartOpts.series.push(extendDeep(_outerNumberSeries));
                    _oneSeriesData = setSeries(seriesDefault,indexs,'outerLine');
                     vm.chartOpts.series.push(extendDeep(_oneSeriesData));
                    _outerBorderSeries = setSeries(outerBorderDefault,indexs,'outerBorder');
                    
                   
                    vm.chartOpts.series.push(extendDeep(_outerBorderSeries));
                    // body...
                }
                function setSeries(defaultData,index,isOuter) {
                    var _oneData;
                    _oneData = defaultData;
                    if (isOuter == 'outerBorder'){
                        _oneData.z = 20 - 3*index-2;
                        _oneData.radius[1] = metaData[index].radiusData/allData * vm.maxRadius + 1;
                    } else if (isOuter == 'outerNumber') {
                        _oneData.z = 20 - 3*index;
                        _oneData.radius[1] = metaData[index].radiusData/allData * vm.maxRadius;
                        _oneData.label.normal.padding[3] = 3.8*index*index + 5;

                    } else if (isOuter == 'outerLine')  {
                        _oneData.z = 20 - 3*index-1;
                        _oneData.startAngle = 340 - 17*index;
                        _oneData.radius[1] = metaData[index].radiusData/allData * vm.maxRadius;
                    } else {

                    }
                    _oneData.labelLine.normal.length = 16;
                    _oneData.center[0] = metaData[index].radiusData/allData * vm.maxRadius+142;
                    _oneData.center[1] = vm.centerY;
                    _oneData.itemStyle.normal.borderColor = 'transparent';//vm.bgColor[index];
                  //  _oneData.itemStyle.normal.color = vm.bgColor[index];
                    _oneData.itemStyle.normal.shadowColor = vm.bgColor[index];
                    _oneData.itemStyle.emphasis.shadowColor = vm.bgColor[index];

                    if (isOuter == 'outerNumber') {
                        _oneData.data[0].name = metaData[index].type;
                        _oneData.data[0].value = metaData[index].filterData;
                    } else {
                        _oneData.data[0].name = metaData[index].title;
                        _oneData.data[0].value = metaData[index].allData;
                    }

                   // console.log(_oneData.z)
                    _oneData.name = metaData[index].type;

                    return _oneData;
                }
				option = vm.chartOpts;
				  //初始化echarts实例
				var myChart = echarts.init(document.getElementById('chartmain'));
				for(let j = 0;j<option.series.length;j++){
					if(option.series[j].startAngle == 180){
						option.series[j].itemStyle.normal.color.image = img2;
					}
					
				}
		        //使用制定的配置项和数据显示图表
		        myChart.setOption(option);
      }
    </script>
</body>
</html>